import{_ as t}from"./plugin-vue_export-helper.21dcd24c.js";import{r as e,o as p,c,b as n,d as o,e as s,a as l}from"./app.73ec3e73.js";var i="/assets/bk383.6dd60a65.png";const u={},k=n("h1",{id:"shared-preferences\u672C\u5730\u5B58\u50A8",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#shared-preferences\u672C\u5730\u5B58\u50A8","aria-hidden":"true"},"#"),s(" shared_preferences\u672C\u5730\u5B58\u50A8")],-1),r=n("h2",{id:"\u5730\u5740",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u5730\u5740","aria-hidden":"true"},"#"),s(" \u5730\u5740")],-1),d={href:"https://pub.flutter-io.cn/packages/shared_preferences",target:"_blank",rel:"noopener noreferrer"},m=s("\u672C\u5730\u5B58\u50A8\u5730\u5740"),v=l(`<h2 id="\u5F15\u5165\u4F9D\u8D56" tabindex="-1"><a class="header-anchor" href="#\u5F15\u5165\u4F9D\u8D56" aria-hidden="true">#</a> \u5F15\u5165\u4F9D\u8D56</h2><div class="language-dart ext-dart line-numbers-mode"><pre class="language-dart"><code>dependencies<span class="token punctuation">:</span>
  shared_preferences<span class="token punctuation">:</span> <span class="token operator">^</span><span class="token number">2.0</span><span class="token number">.15</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5728pubspec.yaml\u4E2D\u914D\u7F6E\u4FDD\u5B58\u540E\uFF0C\u5728VS Code\u73AF\u5883\u4E2D\u4F1A\u81EA\u52A8\u4E0B\u8F7D\u4F9D\u8D56\u5305\u3002 \u5982\u679C\u65E0\u6CD5\u6B63\u5E38\u4E0B\u8F7D\uFF0C\u6267\u884C flutter pub get \u3002</p><h2 id="\u5F15\u5165\u5E93" tabindex="-1"><a class="header-anchor" href="#\u5F15\u5165\u5E93" aria-hidden="true">#</a> \u5F15\u5165\u5E93</h2><p>\u5728\u9700\u8981\u7528\u5230\u7684\u8BE5\u63D2\u4EF6\u7684\u6587\u4EF6\u4E2D\u5F15\u5165\u63D2\u4EF6\u5305\u3002</p><div class="language-dart ext-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">import</span> <span class="token string-literal"><span class="token string">&#39;package:shared_preferences/shared_preferences.dart&#39;</span></span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="\u5C01\u88C5\u5B58\u50A8\u7EC4\u4EF6" tabindex="-1"><a class="header-anchor" href="#\u5C01\u88C5\u5B58\u50A8\u7EC4\u4EF6" aria-hidden="true">#</a> \u5C01\u88C5\u5B58\u50A8\u7EC4\u4EF6</h2><div class="language-dart ext-dart line-numbers-mode"><pre class="language-dart"><code><span class="token comment">// lib/pages/common/Storage.dart</span>
<span class="token comment">// \u5F15\u5165\u672C\u5730\u5B58\u50A8</span>
<span class="token keyword">import</span> <span class="token string-literal"><span class="token string">&#39;package:shared_preferences/shared_preferences.dart&#39;</span></span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Storage</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u5199\u5165\u6570\u636E\u65B9\u6CD5</span>
    <span class="token keyword">static</span> <span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token keyword">void</span><span class="token punctuation">&gt;</span></span> <span class="token function">setString</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token punctuation">{</span>
        <span class="token class-name">SharedPreferences</span> sp <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token class-name">SharedPreferences</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        sp<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u5199\u5165String\u7C7B\u578B</span>
        <span class="token comment">// \u6CE8\u610F\uFF1A\u5982\u679C\u8981\u5199\u5165\u5176\u4ED6\u7C7B\u578B\u7684\u6570\u636E\uFF0C\u8BBE\u7F6E\u65B9\u6CD5\u5982\u4E0B</span>
        <span class="token comment">// sp.setBool(key, value);//\u5199\u5165bool\u7C7B\u578B</span>
        <span class="token comment">// sp.setDouble(key, value);//\u5199\u5165Double\u7C7B\u578B</span>
        <span class="token comment">// sp.setInt(key, value);//\u5199\u5165Int\u7C7B\u578B</span>
        <span class="token comment">// sp.setStringList(key, value);//\u5199\u5165StringList\u7C7B\u578B</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// \u8BFB\u53D6\u6570\u636E\u7684\u65B9\u6CD5</span>
    <span class="token keyword">static</span> <span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> <span class="token function">getString</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token keyword">async</span><span class="token punctuation">{</span>
        <span class="token class-name">SharedPreferences</span> sp <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token class-name">SharedPreferences</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> sp<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u8BFB\u53D6String\u7C7B\u578B</span>
        <span class="token comment">// \u6CE8\u610F\uFF1A\u5982\u679C\u8981\u8BFB\u53D6\u5176\u4ED6\u7C7B\u578B\u7684\u6570\u636E\uFF0C\u8BBE\u7F6E\u65B9\u6CD5\u5982\u4E0B</span>
        <span class="token comment">// sp.getBool(key, value);//\u8BFB\u53D6bool\u7C7B\u578B</span>
        <span class="token comment">// sp.getDouble(key, value);//\u8BFB\u53D6Double\u7C7B\u578B</span>
        <span class="token comment">// sp.getInt(key, value);//\u8BFB\u53D6Int\u7C7B\u578B</span>
        <span class="token comment">// sp.getStringList(key, value);//\u8BFB\u53D6StringList\u7C7B\u578B</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// \u79FB\u9664\u6570\u636E\u7684\u65B9\u6CD5</span>
    <span class="token keyword">static</span> <span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token keyword">void</span><span class="token punctuation">&gt;</span></span> <span class="token function">remove</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token punctuation">{</span>
        <span class="token class-name">SharedPreferences</span> sp <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token class-name">SharedPreferences</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        sp<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// \u79FB\u9664\u6240\u6709\u7684\u952E\u503C\u5BF9</span>
    <span class="token keyword">static</span> <span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token keyword">void</span><span class="token punctuation">&gt;</span></span> <span class="token function">clearAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token punctuation">{</span>
        <span class="token class-name">SharedPreferences</span> sp <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token class-name">SharedPreferences</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        sp<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u4F7F\u7528\u5B58\u50A8\u7EC4\u4EF6" tabindex="-1"><a class="header-anchor" href="#\u4F7F\u7528\u5B58\u50A8\u7EC4\u4EF6" aria-hidden="true">#</a> \u4F7F\u7528\u5B58\u50A8\u7EC4\u4EF6</h2><div class="language-dart ext-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">import</span> <span class="token string-literal"><span class="token string">&#39;package:flutter/material.dart&#39;</span></span><span class="token punctuation">;</span>

<span class="token comment">// \u5F15\u5165\u5C01\u88C5\u7684\u6570\u636E\u8BF7\u6C42\u65B9\u6CD5</span>
<span class="token keyword">import</span> <span class="token string-literal"><span class="token string">&#39;../common/Storage.dart&#39;</span></span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">StoragePage</span> <span class="token keyword">extends</span> <span class="token class-name">StatefulWidget</span> <span class="token punctuation">{</span>
    <span class="token class-name">StoragePage</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">Key</span> key<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">super</span><span class="token punctuation">(</span>key<span class="token punctuation">:</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token metadata function">@override</span>
    _StoragePageState <span class="token function">createState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">_StoragePageState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> _StoragePageState <span class="token keyword">extends</span> <span class="token class-name">State</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">StoragePage</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> _username<span class="token punctuation">;</span>
    <span class="token comment">// \u8BFB\u53D6\u6570\u636E</span>
    <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">async</span><span class="token punctuation">{</span>
        <span class="token class-name">String</span> username <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token class-name">Storage</span><span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;username&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        	<span class="token keyword">this</span><span class="token punctuation">.</span>_username<span class="token operator">=</span>username<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// \u5199\u5165\u6570\u636E</span>
    <span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">async</span><span class="token punctuation">{</span>
    	<span class="token keyword">await</span> <span class="token class-name">Storage</span><span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;username&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;\u5F20\u4E09&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// \u79FB\u9664\u6570\u636E</span>
    <span class="token function">removeData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">async</span><span class="token punctuation">{</span>
        <span class="token keyword">await</span> <span class="token class-name">Storage</span><span class="token punctuation">.</span><span class="token function">removeString</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;username&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        	<span class="token keyword">this</span><span class="token punctuation">.</span>_username<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token metadata function">@override</span>
    <span class="token class-name">Widget</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token class-name">BuildContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">Scaffold</span><span class="token punctuation">(</span>
            appBar<span class="token punctuation">:</span> <span class="token class-name">AppBar</span><span class="token punctuation">(</span>
            	title<span class="token punctuation">:</span> <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;\u672C\u5730\u5B58\u50A8&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
            body<span class="token punctuation">:</span> <span class="token class-name">Center</span><span class="token punctuation">(</span>
                child<span class="token punctuation">:</span> <span class="token class-name">Column</span><span class="token punctuation">(</span>
                    mainAxisAlignment<span class="token punctuation">:</span> <span class="token class-name">MainAxisAlignment</span><span class="token punctuation">.</span>center<span class="token punctuation">,</span>
                    children<span class="token punctuation">:</span> <span class="token punctuation">[</span>
                        <span class="token class-name">RaisedButton</span><span class="token punctuation">(</span>
                            child<span class="token punctuation">:</span> <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&#39;\u8BBE\u7F6E\u6570\u636E&#39;</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                            onPressed<span class="token punctuation">:</span> setData<span class="token punctuation">,</span>
                        <span class="token punctuation">)</span><span class="token punctuation">,</span>
                        <span class="token class-name">SizedBox</span><span class="token punctuation">(</span>height<span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                        <span class="token class-name">RaisedButton</span><span class="token punctuation">(</span>
                            child<span class="token punctuation">:</span> <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&#39;\u83B7\u53D6\u6570\u636E&#39;</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                            onPressed<span class="token punctuation">:</span>getData<span class="token punctuation">,</span>
                        <span class="token punctuation">)</span><span class="token punctuation">,</span>
                        <span class="token class-name">SizedBox</span><span class="token punctuation">(</span>height<span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                        <span class="token class-name">RaisedButton</span><span class="token punctuation">(</span>
                            child<span class="token punctuation">:</span> <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&#39;\u6E05\u9664\u6570\u636E&#39;</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                            onPressed<span class="token punctuation">:</span>removeData<span class="token punctuation">,</span>
                        <span class="token punctuation">)</span><span class="token punctuation">,</span>
                        <span class="token class-name">SizedBox</span><span class="token punctuation">(</span>height<span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                        <span class="token class-name">RaisedButton</span><span class="token punctuation">(</span>
                            child<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_username <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token operator">?</span><span class="token class-name">Text</span><span class="token punctuation">(</span>_username<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;\u65E0\u540D\u59D3&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                            onPressed<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                            <span class="token punctuation">}</span><span class="token punctuation">,</span>
                        <span class="token punctuation">)</span><span class="token punctuation">,</span> 
                    <span class="token punctuation">]</span>
                <span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7ED3\u679C</p><img src="`+i+'" alt="solar">',12);function b(g,h){const a=e("ExternalLinkIcon");return p(),c("div",null,[k,r,n("p",null,[n("a",d,[m,o(a)])]),v])}var S=t(u,[["render",b],["__file","shared_preferences\u672C\u5730\u5B58\u50A8.html.vue"]]);export{S as default};
